# Part 3-3 Security
- [Part 3-3 Security](#part-3-3-Security)
    - [01. 시스템 보안](#시스템-보안)
      - [윈도우](#Windows)
      - [버퍼 오버플로우](#Buffer-Overflow)
    - [02. 네트워크 보안](#네트워크-보안)
    - [03. 어플리케이션 보안](#어플리케이션-보안)
    - [04. 침해사고 분석 및 대응](#침해사고-분석-및-대응)
    - [05. 정보보안 일반](#정보보안-일반)
    - [06. 정보보안관리/법규](#정보보안관리/법규)
   

[back](https://github.com/codenee/CS-Study)

</br>

## 시스템 보안
### Windows
* 윈도우 인증 구성 요소
  * LSA (Local Security Authority)
    * 모든 계정의 로그인에 대한 검증 및 시스템 자원에 대한 접근 권한 검사
  * SAM (Security Account Manager)
    * 계정과 패스워드 일치하는지 확인(SAM파일에 저장된 정보로) -> 인증 확인 -> 토큰 발생
    * SAM 파일
      * 사용자 로그인 정보와 그룹 계정 및 암호화된 패스워드 정보 저장한 데이터베이스
  * SRM (Service Reference Monitor)
    * 인증된 사용자에게 SID부여
* SAM파일 접근 통제 설정
  * 패스워드를 관리하고 LSA를 통한 인증을 제공하느 ㄴ중요한 파일이므로 접근 통제 필요.
  * Administrator 및 System 그룹 이외에는 SAM파일에 대한 접근을 제한한다(불필요한 계정(Everyone) 제거)
* 윈도우 보안 식별자 (SID : Security Identifier)
  * 사용자, 그룹에게 부여되는 고유한 식별 번호(윈도우는 계정으로 식별하는 것이 아니라 SID로 식별한다)
  * SAM파일에 SID저장
* 윈도우 인증 구조
  * Challenge & Response 구조
  * 인증 암호 알고리즘
    * LM (Lan Manager) : 윈도우 2000, XP, 취약한 알고리즘
    * NTLM 해시 : LM해시 + MD4해시
    * NTLMv2 : 윈도우 비스타이후 윈도우 시스템의 기본 인증 프로토콜, 매우 복잡!, 현재도 사용, 크래킹 어렵

[Up](#part-3-3-Security)

</br>

### Buffer Overflow
* 프로세스 메모리 구조
  * Text 영역
    * 프로그램 코드와 상수가 정의되어 있고, 읽기만 가능한 메모리 영역이기 때문에 데이터를 저장하려고 하면 분할 충동을 일으켜 프로세스가 중단된다.
  * Data 영역
      * 전역 변수와 정적 변수가 저장되어 있는 영역이다.
  * Heap 영역
      * 프로그래머의 필요에 따라 동적 메모리 호출에 의해 할당되는 메모리 영역이다. (메모리 위 방향으로 커진다.)
  * Stack 영역
      * 함수 인자 값, 함수 내의 지역 변수, 함수의 반환 주소 등이 저장되는 영역으로 상위 메모리 주소에서 하위 메모리 주소로 데이터가 저장된다. (메모리 아래 방향으로 커진다.)
* 버퍼 오버플로우
  * 스택 버퍼 오버플로우
    * 스택 영역에 할당된 버퍼 크기를 초과하는 양의 데이터(실행 가능 코드)를 입력하여 복귀 주소(RET, Return Address)를 변경하고 공격자가 원하는 임의의 코드를 실행
    * 공격 절차
      1) 공격 쉘 코드를 버퍼에 저장
      2) 루트 권한으로 실행되는 프로그램의 특정 함수의 스택 반환주소 버퍼를 오버플로우시켜서 공격 셸 코드가 저장되어 있는 버퍼 주소로 덮어씌운다.
      3) 특정 함수의 호출이 완료되면 조작된 반환 주소로 셸 코드의 주소가 반환되어 셸 코드가 실행되고, 루트 권한을 획득하게 된다.
  * 힙 버퍼 오버플로우
    * 프로그램 실행 시 힙 영역에 할당된 버퍼 크기를 초과하는 양의 데이터를 입력하여 메모리의 데이터와 함수 주소 등을 변경하여 공격자가 원하는 임의의 코드를 실행    
  * 셸 코드
    * 오버 플로우가 발생하는 버퍼에 저장되는 공격자의 코드로 실행 제어를 이동시키는 코드
  * 공격 대응책
    * 프로그램 개발 시 버퍼 오버플로우에 취약하지 않은 함수를 사용하거나 입력 값에 대한 적절한 크기 검증을 통해 버퍼 오버플로우가 발생하지 않도록 한다.
    * 컴파일 시간 방어
      * 스택 가드 (Stack Guard)
        * 메모리상에서 프로그램의 복귀주소와 변수 사이에 특정 값(Canary Word)을 저장해 두었다가 그 값이 변경되었을 경우를 오버플로우를 탐지 ( 카나리 단어 기법 )
      * 스택 쉴드 (Stack Shield)
        * 함수 시작 시 복귀 주소를 Global RET라는 특수 스택에 저장해 두었다가 함수 종료 시 저장된 값과 스택의 RET값을 비교해 다를 경우 오버플로우로 가정하여 프로그램 실행을 중단시키는 기술
    * 실행 시간 방어
        * ASLR (Address Space Layout Randomization), 주소 공간의 임의 추출
          * 메모리 공격을 방어하기 위해 주소 공간 배치를 난수화하는 기법으로 실행 시마다 메모리 주소를 변경시켜 악성코드에 의한 특정주소 호출을 방지.
          * 실행 시마다 메모리 주소를 변경시켜 버퍼 오버플로우를 통한 특정 주소 호출을 차단한다.
  
</br>



[Up](#part-3-3-Security)

</br>

